# 복제 서비스 구현

- 요청의 복제
- 결과의 복제

## 요청의 복제

요청을 통해 복제를 한다는 뜻이다. 노드 A에 있는 인스턴스 관리 서비스와
노드 B에 있는 인스턴스 관리 서비스에 동시에 요청을 보낸다.

처음 상태가 같고 실행하는 코드가 동일하며 동시에 상태를 변경하는 대상이
없다고 하면 결과도 같아야 한다.

이런 특성을 갖는 서비스를 확정적인(deterministic)
비공유 (non-shared) 서비스라고 하자.

이런 서비스의 경우 standby 서비스에서 응답을 막는 것만으로
복제 서비스의 구현이 가능하다.

## 결과의 복제

결과의 복제는 결과 상태의 복제라는 뜻이다. 노드 A에서 실행한 결과를
노드 B에 전송하고 노드 B가 반영한다.

이런 상태 복제가 동작하려면 추가 프로토콜을 개발해야 한다.

따라서, 상태 복제가 이미 가능한 서비스를 두고
각 서비스가 여기에 의존하여 복제를 수행하는 방식이 적합해 보인다.

redis 클러스터나 NoSQL 클러스터를 두고 여기에 의존하는 서비스를
구현하는 방식이다. 그렇지 않을 경우 프로토콜 구현이 복잡해질 것으로 보인다.

하지만 시도해 볼 수는 있을 듯 하고 분산 시스테의 다양한 난제들을
만나고 해결하게 될 것이다.

# 정리

일단은 요청 기반 복제가 가능한 영역을 최대한 확장해 본다.
