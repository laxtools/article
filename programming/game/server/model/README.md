# Game Model 

게임의 개별 컨텐츠 영역에 대해 Data, ADT, Composition, Protocol 관점에서 정리해 나간다. 

게임별로 차이가 많이 나는 부분은 제외하고 두 개 게임을 비교하고 공통 부분을 추상화 기반에 사용한다. 좋은 아이디어는 확장해서 포함할 수 있다. 



## 정리 방법 

ADT로 시작하고 프로토콜과 조합으로 완료한다.  

- Type
  - Operations
- Data 
  - Configuration 
  - Decision / Condition 
- Composition 
  - Agent 내의 처리? 
  - Relation 
    - 다른 타잎들 관계 
  - Context 
    - 사용하는 문맥
- Protocol 



## 작성 

문서로 게임을 만들 수 없다. 게임은 게임으로서만 동작한다. 따라서, 게임을 만들어야 한다.  비용이 큰 클라이언트 처리를 제외하고 에이전트 기반으로 행동을 정의한 후 기능별 게임을 만든다. 



# 정의와 구조의 탐색 

지금까지 서버 개발은 주로 클라이언트와 프로토콜을 맞추면서 서버의 구성을 설계하면서 진행한다.  설계는 데이터, 타잎, 구성을 명확하게 구분하지 않고 진행하는 경우가 많으며 필요한 내용을 찾아서 구현한다.  거꾸로 타잎, 데이터, 구성, 프로토콜의 순서로 나아가야 단위 테스트, 증명, 기능 테스트로 진행할 수 있다.  

필요한 타잎과 알고리즘을 추출하고, 이들을 다양하게 만들 데이터를 정의하고, 마지막으로 조합을 통해 구성하며 프로토콜에서 조합의 처리 코드를 사용하는 방식으로 올라가야 한다. 이렇게만 하면 어럽기 때문에 두 가지 방향을 오갈 수는 있으나 되도록 타잎과 알고리즘에서 시작하도록 한다. 최소한 **테스트** 가 타잎에서 시작되도록 해야 한다.  

여기서 서버 개발을 타잎과 구성 기반으로 변경하기 위해 게임 서버 내 게임 요소의 타잎 정의를 찾고 이들이 연관되어 사용되는 구조를 정리하고자 한다. 



## 배경 



#### **데이터 게임**

게임의 요소 중 데이터를 다루는 부분은 매우 중요한 하나의 영역이다. 특히 엔티티 간의 상호 작용이 많은 RPG 게임들과 사용자들 간의 상호작용이 있는 게임에서는 장기적인 성패를 좌우한다. 밸런스라고 불리는 수치적인 요소를 별도로 개발하고 확인하는 기능은 중요하다. 



#### **구조의 개발과 검증**

클라이언트를 개발하면서 서버를 동시에 개발하는 방법으로 개발이 진행되는데 꼭 그래야 할 필요가 없다. 결국은 통합하여 검증하겠지만 서버 자체적으로 데이터 처리를 구현하고 검증할 수 있다. 그렇게 개발을 하지 않아 불가능했을 뿐이다. 따라서, 사후에 봇을 추가해서 테스트 하거나 하는 방식을 쓰지 않고 단위 테스트나 기능 테스트처럼 별도의 개발 구조를 만들고 진행할 수 있다. 



#### 확장 

서버 개발에서 데이터 처리가 중요하나 AI, 공간 처리, DB 처리까지 포괄하여 클라이언트 없이 개발을 진행할 수 있다. 얼마나 쉽게 클라이언트를 시뮬레이션 하는 에이전트들을 개발 할 수 있는가와 서버의 플레이 내용을 확인하는 과정의 정리가 핵심이다. 

따라서, 지금 여기서 하는 작업은 "게임 서버 제작 파이프라인"의 개뱔이 가능하도록 하는 구조를 찾는 것으로 "서버 개발 구조"라고 할 수 있다.  



##목표 

- 구성 요소의 정의 
- 시뮬레이션 구조 
  - 단일 또는 다중 에이전트 
- 개발 구조 



## 예시. 인벤토리 게임

에이전트는 인벤토리에 추가, 삭제, 변경 등을 수행한다. 기능 테스트와 유사하다.  기능 테스트가 아닌 이유는 무엇인가?  점점 확장되어 완전한 게임이 실행되는 데까지 나아가기 때문이다.  다른 측면에서 기능 테스트를 쌓아서 게임이 된다는 것을 증명하고자 한다. 

인벤토리에 추가, 삭제가 발생하면 다른 게임인 스탯 게임과 연관된다. 이는 기능의 조합이 된다. 이를 왜 게임으로 보아야 하는가?  게임으로 보아야 재미가 있는 지를 생각하게 된다.  인벤토리 정도에 무슨 재미가 있는가? 성장이 되기 때문에 재미가 있다. 성장을 가장 빠르게 하는 경로를 찾는 것이 게임이 된다. 

여기까지 생각하고 나면 인벤토리는 ADT이고 아이템과 스탯, 아이템의 용도가 가치를 얻는 효과가 되므로 목표에 연관되고 목표가 주어져야 재미가 생기기 때문에 이 정도 규모가 되어야 게임이라고 할만하다는 걸 알게 된다. 



## 게임의 정의

행동의 선택을 학습해야 하고 선택에 따른 결과가 효용을 갖는 타잎들의 집합의 최소 단위가 게임이다.  게임들은 계층적으로 구성된다. 

좀 더 생각해서 잘 정의해야 완전한 대수적인 정의를 얻을 수 있다. 대수적인 정의라야 명확해진다. AnyLogic에서 본 에이전트 기반 시뮬레이션 시스템에서 에이전트 간의 정보 교환과 내부 상태 처리를 구현을 살펴본다. 



## 개발 순서 

- 탸잎 
  - 데이터 
    - 핃드 
    - 구성 
  - 연산 / 동작 
  - 단위 테스트 
- 관계 / 조합 
  - 타잎들의 조합 
  - 메세지 
  - 분산된 타잎들을 포함 
  - 기능 테스트 



완전히 빈 게임에서 시작할 수 없다. RPG를 가정해야 내용이 만들어진다. 분산 시뮬레이션 시스템으로서 서버를 정의하고 이를 구현하는 과정을 서버 개발로 본다. 이는 매우 좋다. 클라이언트 없이도 서버를 만들 수 있고 테스트 할 수 있고 결과를 확인할 수 있다.  그래도 장르가 정해지고 어느 정도의 기획이 있어야 진행할 수 있다. 

RPG 개발이 시작되려면 공간이 있어야 한다. 공간은 일반적인 구조로 특수화가 가능해야 한다. 대규모 에이전트 처리를 위한 빠르고 느슨한 처리나 소규모의 정확한 처리를 선택할 수 있어야 한다. 

이 쪽의 생각을 정리하면서 그 기반을 개발해야 한다. 기능 에이전트를 개발하고 볼 수 있는 구조를 만들어야 한다.  시각화가 포함되어야 하고 실시간과 로그를 통한 사후 파악이 모두 가능해야 한다. 

















