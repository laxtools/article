# Sever Spatial Processing 

공간 정보를 로딩하고, 길찾기를 하여 이동하고, 물리 기반의 충돌 처리를 하고, 동적인 오브젝트의 움직임이 있고, 판정을 하는 등 서버 상의 공간 처리 요구가 매우 많다. 게임에 따라 상세한 처리 정도는 다르지만 모두 필요하고 기반이 되는 기능으로 중요하다. 

이전의 2D 게임들은 쿼드 트리 기반으로 처리했다. 여기서도 상세한 정도에 따라 다양한 구현 수준이 있다. 3D RPG들도 대부분 이와 같은 빠른 처리가 가능한 구조를 기반으로 충돌 기능을 별도로 구현하는 정도였다. 테라, 검은 사막은 복셀 기반의 공간 처리를 구현했다고 하는데 일관성이 있고 구현 코드는 간략하겠지만 데이터 양이 매우 많을 수 있다. 매력적이긴 하다. 

2가지 방향으로 생각한다. 

- 충돌체 중심의 물리 정보와 네비매시가 통합된 모델
- 복셀을 전체에 적용하는 모델. 



##충돌체 중심의 물리 정보와 네비매시가 통합된 모델

배틀그라운드가 딱 맞는 모델이다. 풀 3D 게임들이라면 모두 이 영역에 해당할 수 있다.  2.5D 게임이라면 네비게이션 매시와 2D 충돌로 처리할 수 있으나 항상 예외적인 요구는 생긴다.  빠르고 일반적인 알고리즘과 구조를 사용하고 게임 특성에 맞게 조절이 가능한 구성을 갖춰야 한다. 

### 프로토타잎 

언리얼 4의 Detour와 PhysX 조합의 처리 구조에 기본 모델로 삼아 C++로 프로파일링이 잘 장착된 Bullet / Detour 라이브러리를 개발한다. 

- 슈팅 게임
  - 캐릭터는 캡슐
- 언리얼 4 Exporter 
  - PhysX 익스포터 
    - 오브젝트 tag 
    - 도어 / 윈도우  
  - 네비매시 익스포터 



### 알고리즘 

Detour 알고리즘과 물리 정보를 통합한다.  매시를 분할하여 이동 불가를 설정할 수 있도록 한다.  









## 복셀을 전체에 적용하는 모델 









## 기본 요구 사항 

- 수 백개의 맵이 8GB 서버에 생성될 수 있어야 한다 
  - 메모리를 적게 사용할수록 좋다. 
  - 구현할 때 핵심 요구사항









