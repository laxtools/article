# 데이터 게임 제작 

DIR의 한 축인 데이터 게임의 완결을 위해서는 시뮬레이션 도구가 필요하다. 서비스 중에 획득한 플레이 데이터를 수집하고 분석하여 게임에 반영하는 작업도 중요하지만 개발 중에 방대한 데이터를 만들어 내고 이에 기반하여 반복적으로 개선하는 작업도 중요하다. 

개발 중에 시뮬레이션을 통한 데이터 개발과 개선 작업이 가능하려면 게임에서 사용하는 코드와 데이터를 그대로 사용하고 게임 플레이 로직이 동작하는 상태에서 빠르게 플레이 데이터를 만들 수 있어야 한다. 

대부분의 게임들이 입력에 기반하고 있고 시간에 따라 주기적인 처리를 포함하고 있다. 시간에 따른 처리는 시간 자체를 입력으로 보면 되기 때문에 전체가 입력에 따른다고 봐도 무방하다.  따라서, 현재의 게임들은 이산 이벤트 시뮬레이션[^1]이 가능하다. 

시뮬레이션을 게임 코드와 동일하게 동작하도록 해야 한다. 데이터 게임은 결과 값이 입력으로 사용되는 구조이기에 값들이 달라지면 결과 값이 크게 차이가 날 수 있다.  하지만 게임과 동일한 코드가 되면 시뮬레이션 자체가 어려워진다. 

여기서의 접근은 데이터에 집중된 게임과 구조를 만들고 결과를 재미있게 검증할 수 있는 도구를 고안한다. 

[^1]: Discrete Event Simulation 



## 데이터 "게임" 

데이터만 있는 게임을 만드는 건 어떨까?  간단하지만 흥미로운 인터페이스를 갖고 처리되는 게임이라면 더 좋을 듯 하다.  캐릭터의 재화, 스탯, 성장, 전투 (데이터만)를 분석하는 시스템으로서 구현한다면 어떨까? 데이터를 정의하고 설명하는 언어를 찾아 보는 건 어떨까? 

이와 같이 **게임** 으로 접근해서 데이터만 처리하는 걸 만들어 보자. 

CSV에 기초하지만 처리가 가능하다면 더 좋을 듯 하다.  어떻게 정의하는가에 따라 다를 것으로 보인다.  정의는 각 기능에 따라 구조가 달라진다. 일련의 행동들을 쉽게 구현할 수 있는 구조는 있다. 이를 찾아서 정리해야 한다. 



## 게임의 구현 

데이터와 처리를 갖는 타잎을 구성한다.  되도록 선언적으로 사용 가능하도록 한다.  기존 RPG 게임들의 기능과 데이터에 기초해서 추상화 한다. 

RPG 게임은 스탯, 아이템 (방어구, 무기), 전투, 기타 재화를 중심으로 진행된다. 전투는 이미지/인상 게임의 가장 중요한 요소이고 관계 게임에서도 중요한 역할을 한다. 데이터 게임으로서 전투는 데미지 판정, 경험치, 아이템 획득과 연관된다. 이 부분만 분리해서 본다. 



# 스탯 게임 

RPG 데이터 게임의 기반이다. 아이템도 스탯에 기여하고 전투도 스탯이 기여한다. 캐릭터 (PC/NPC)의 스탯을 어떻게 구성하느냐에 따라 게임성이 달라진다.  



# 머니 게임 

근래 게임들은 수치로 표시되는 돈을 여러 가지 제공한다.  F2P 게임들에서 유료화와 어뷰징과 오토 플레이로  인한 인플레이션을 제어하기 위해 도입된다. 

거래를 위한 화폐로서 기능이 여전히 기본 기능으로 남아 있다. 



# 아이템 게임

- 인벤토리 
- 속성
- 기능 







# 전투 게임 

전투는 사용자의 제어가 포함되고 데미지 공식에 확률 요소가 많이 관여하며 아이템 드랍 등에도 확률이 많이 사용된다.  사용자의 제어와 수치로 포함된 확률 요소는 모두 확률로 처리되어야 한다. 또한 NPC나 타 플레이어도 전투를 진행한다. 이 과정은 반복된다. 따라서, 전투 과정은 여러 참여자가 입력을 발생 시키는 확률 과정이다. 



## 전투의 확률 과정 (Stochastic Process of Battle)





## 보상









# 툴 설계  

서버는 C++로 작성하므로 툴도 C++이 근간이 되도록 한다.  동작은 데이터 스키마와 데이터, 데이터 처리 코드가 핵심이다. 동작 자체는 C++로 구현해야 한다. 이를 기반으로 실제 게임으로 옮겨서 사용 가능하도록 한다.  이렇게 하면 실제 통신 코드와 분리된 추상화된 처리 구조를 확보할 수 있다.  

분석은 로그와 그래프 중심의 visualization이 핵심이 된다.  VTK를 시각화 도구로 사용한다.  자료는 로그를 실시간으로 수집하고 분석해서 볼 수 있도록 한다. 통신 기능을 추가할 수도 있다.   





## 자료 



시각화 도구 

- VTK
  - 매뉴얼이 책으로 나와 있다 
  - 2D / 3D 모두 지원한다. 




# 리서치 



## 확률 과정론 

https://www.ma.utexas.edu/users/gordanz/notes/introduction_to_stochastic_processes.pdf

위의 문서에 기초하여 별도의 스터디를 진행한다. 응용에 집중한다. 특히, 전투의 확률 과정을 모델링하고 계산할 수 있을 때까지 진행한다. 가장 간단한 전투라도 된다. 가위 / 바위 / 보라도 모델링해야 한다.  안 되면 시뮬레이션으로 데이터를 추출할 수도 있다. 모두 고려한다. 













