# 캐릭터 자산의 관리 구조 

아이템, 스킬, 펫, 각종 돈을 포함한 캐릭터 보유 자산을 관리하는 구조가 공간 상의 이동과 전투 처리와 함께 RPG 서버의 가장 중요한 두 가지 관리 항목이다. 

이동과 전투는 충돌과 이동 공간의 관리와 상태 처리로 가능하며 직접 여러 번 클라이언트와 서버 상에서 구현한 경험이 있다. 게임의 특성마다 다르지만 Octree, 충돌 공간, Navigation 공간을 통합하거나 나누어 처리하면 된다. 상태 처리는 HFSM, Behavior Tree를 사용하고 개별 스킬이나 Buff 등의 상태는 별도 오브젝트로 관리한다. 

게임 데이터, 데이터베이스, 클라이언트 화면 표시와 서버 요청, 각종 조건 체크 등에 사용되는 자산 관리를 추상화하고 구조화 하여 쉬운 개발이 가능한 모델을 찾고자 한다. 

## Item과 Storage의 추상화  

- 아이템 화 
  - 돈 
    - 다양한 화페의 아이템화
  - 펫 
- 아이템 속성의 처리 
  - 1, 2, ..., N차 속성의 계산과 관리
- 아이템 트랜잭션 
  - 강화 
  - 분해
  - 합성 
  - 슬롯
  - 메일 
  - 교환
  - 판매
- 아이템 트래킹
  - 생성, 변경, 소멸 이력 관리
  - 드랍, 루팅, 파티 루팅
- 아이템의 관리
  - 인벤토리 
  - 보관함
  - 길드 보관함 
    - 집단 보관함
  - DB 통합과 분리
- 아이템 효과
  - 스킬 
  - 버프 



## 실제 사례 

ItemTransaction, InventoryComponent, StorageComponent,  UseItemComponent, PetManageComponent, ... 

위의 사례를 바탕으로 추상화를 진행한다. 









