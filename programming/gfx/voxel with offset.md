# voxel with border 

높이맵 기반의 게임을 보다가 복셀에 높이와 수평 경계 정보를 포함하면 기존 복셀보다 훨씬 적은 개수로 공간을 처리할 수 있겠다는 생각이 들었다. 곡면을 복셀화 하려면 아주 많은 복셀들이 필요하다. 이에 대한 대안으로 일정 오차 범위 안에서 복셀의 각 정점에 높이나 좌우 경계 값을 주면 적은 데이터로 정확한 구성을 가질 수 있다. 

복셀로 게임을 처리할 때 동적인 오브젝트 처리가 필요한데 이는 네비게이션 매시를 사용할 경우에도 필요한 기능이다. 동적인 장애물 처리는 복셀 세분화와 칠하기로 가능하므로 동적으로 합치고 분할하기가 수월한 복셀 쪽이 더 유리할 수 있다. (아니면 네비매시와 같은 수준일 수도 있다. 그래프로 본다면) 

맵의 정적인 영역 데이터가 매우 크므로 이는 공유하고 동적인 부분만 따로 관리하면서 길찾기나 겹치기 처리나 동적인 오브젝트 처리가 가능한 구성을 만들어야 한다. 

recast / detour의 crowd manager를 사용하는 게임을 보았는데 이쪽 기능을 살피고 충돌 판정을 복셀과 오브젝트  배치에 따른 통합이 이루어지면 전체 기능은 완성된다. 

실제 구현과 테스트를 통해 확인하고 개선해 나가야 한다. 일단, 방향은 괜찮을 듯 하다. 

Cinder를 사용하여 어느 정도 그릴 수 있게 되었으므로 그 쪽에 실제 맵과 유사한 환경을 갖추고 단순한 맵부터 처리하도록 한다. 아마도 올 (2019년) 4월 정도면 진행 가능해 보인다. 

## 기능 

- 복셀화  
- vertex offset (8bit level)
  - offset direction (1bit)
- 동적인 병합 / 분할 
- 동적인 속성 페인팅 
- 복셀 트리와 오브젝트 관리 통합
  - 일정 레벨에 오브젝트 포함 
- 정적 데이터와 동적 데이터 통합 
- Crowd 처리 
  - avoid collision 
  - avoid overlap

방향은 위와 같지만 실제 서버에서 사용 가능할 정도로 개선하려면 꽤 많은 노력이 필요하다. 그래도 하나의 확실한 방향을 찾아야 하고 괜찮은 방향으로 보이므로 도전하고 완성한다. 

